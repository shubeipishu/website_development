var h=Object.defineProperty;var l=(n,t,e)=>t in n?h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>l(n,typeof t!="symbol"?t+"":t,e);class d{constructor(t){s(this,"canvas");s(this,"ctx");s(this,"particles",[]);s(this,"mouse",{x:null,y:null,radius:150});s(this,"particleCount",60);s(this,"maxDistance",120);s(this,"animationId",null);const e=t.getContext("2d");if(!e)throw new Error("Canvas 2D context not available");this.canvas=t,this.ctx=e,this.init(),this.animate(),this.bindEvents()}init(){this.resize(),this.createParticles()}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}createParticles(){this.particles=[];for(let t=0;t<this.particleCount;t++)this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,radius:Math.random()*2+1,opacity:Math.random()*.5+.3})}bindEvents(){window.addEventListener("resize",()=>{this.resize(),this.createParticles()}),window.addEventListener("mousemove",t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY}),window.addEventListener("mouseout",()=>{this.mouse.x=null,this.mouse.y=null})}drawParticle(t){const e=document.documentElement.getAttribute("data-theme")==="dark",i=this.ctx.createRadialGradient(t.x,t.y,0,t.x,t.y,t.radius*2);e?(i.addColorStop(0,`rgba(139, 92, 246, ${t.opacity})`),i.addColorStop(1,`rgba(6, 182, 212, ${t.opacity*.5})`)):(i.addColorStop(0,`rgba(99, 102, 241, ${t.opacity})`),i.addColorStop(1,`rgba(14, 165, 233, ${t.opacity*.5})`)),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.radius,0,Math.PI*2),this.ctx.fillStyle=i,this.ctx.fill()}drawConnections(){const t=document.documentElement.getAttribute("data-theme")==="dark";for(let e=0;e<this.particles.length;e++)for(let i=e+1;i<this.particles.length;i++){const a=this.particles[e].x-this.particles[i].x,r=this.particles[e].y-this.particles[i].y,o=Math.sqrt(a*a+r*r);if(o<this.maxDistance){const c=(1-o/this.maxDistance)*.3;this.ctx.beginPath(),this.ctx.moveTo(this.particles[e].x,this.particles[e].y),this.ctx.lineTo(this.particles[i].x,this.particles[i].y),t?this.ctx.strokeStyle=`rgba(139, 92, 246, ${c})`:this.ctx.strokeStyle=`rgba(99, 102, 241, ${c})`,this.ctx.lineWidth=.5,this.ctx.stroke()}}}drawMouseConnections(){if(this.mouse.x===null||this.mouse.y===null)return;const t=document.documentElement.getAttribute("data-theme")==="dark";for(const e of this.particles){const i=e.x-this.mouse.x,a=e.y-this.mouse.y,r=Math.sqrt(i*i+a*a);if(r<this.mouse.radius){const o=(1-r/this.mouse.radius)*.6;this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(this.mouse.x,this.mouse.y),t?this.ctx.strokeStyle=`rgba(6, 182, 212, ${o})`:this.ctx.strokeStyle=`rgba(14, 165, 233, ${o})`,this.ctx.lineWidth=1,this.ctx.stroke()}}}update(){for(const t of this.particles)if(t.x+=t.vx,t.y+=t.vy,(t.x<0||t.x>this.canvas.width)&&(t.vx*=-1),(t.y<0||t.y>this.canvas.height)&&(t.vy*=-1),this.mouse.x!==null&&this.mouse.y!==null){const e=t.x-this.mouse.x,i=t.y-this.mouse.y,a=Math.sqrt(e*e+i*i);if(a<this.mouse.radius){const r=(this.mouse.radius-a)/this.mouse.radius*.02;t.x+=e*r,t.y+=i*r}}}animate(){const t=document.documentElement.getAttribute("data-theme")==="dark";this.ctx.fillStyle=t?"#0f172a":"#f8fafc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawConnections(),this.drawMouseConnections();for(const e of this.particles)this.drawParticle(e);this.update(),this.animationId=requestAnimationFrame(()=>this.animate())}}class u{constructor(t,e,i={}){s(this,"element");s(this,"texts");s(this,"speed");s(this,"deleteSpeed");s(this,"pauseTime");s(this,"currentTextIndex",0);s(this,"currentCharIndex",0);s(this,"isDeleting",!1);this.element=t,this.texts=e,this.speed=i.speed||100,this.deleteSpeed=i.deleteSpeed||50,this.pauseTime=i.pauseTime||2e3,this.type()}type(){const t=this.texts[this.currentTextIndex];this.isDeleting?(this.currentCharIndex--,this.element.textContent=t.substring(0,this.currentCharIndex)):(this.currentCharIndex++,this.element.textContent=t.substring(0,this.currentCharIndex));let e=this.isDeleting?this.deleteSpeed:this.speed;!this.isDeleting&&this.currentCharIndex===t.length?(e=this.pauseTime,this.isDeleting=!0):this.isDeleting&&this.currentCharIndex===0&&(this.isDeleting=!1,this.currentTextIndex=(this.currentTextIndex+1)%this.texts.length,e=500),setTimeout(()=>this.type(),e)}}function m(){document.querySelectorAll(".project-card").forEach(t=>{t.addEventListener("mouseenter",()=>{t.style.transform="translateY(-6px)"}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(0)"})})}function x(){const n={threshold:.1,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&(i.target.classList.add("animate-in"),t.unobserve(i.target))})},n);document.querySelectorAll(".section-title, .project-card, .faq-item, .changelog-item, .feedback-form").forEach(e=>{e.classList.add("scroll-animate"),t.observe(e)})}function p(){document.querySelectorAll(".btn, .form-submit, .nav-link").forEach(n=>{n.addEventListener("click",function(t){const e=document.createElement("span");e.classList.add("ripple");const i=this.getBoundingClientRect(),a=Math.max(i.width,i.height);e.style.width=e.style.height=`${a}px`,e.style.left=`${t.clientX-i.left-a/2}px`,e.style.top=`${t.clientY-i.top-a/2}px`,this.appendChild(e),setTimeout(()=>e.remove(),600)})})}function y(){const n=document.getElementById("particle-canvas");n&&new d(n);const t=document.getElementById("typewriter-text");t&&new u(t,["树皮斑马","Bark Zebra","图论爱好者","Web 开发者"],{speed:120,deleteSpeed:60,pauseTime:2500}),m(),x(),p()}export{y as initEffects};
